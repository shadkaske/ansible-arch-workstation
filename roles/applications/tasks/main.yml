---
- name: Set up Firefox
  tags: firefox
  block:
    - name: Install Firefox
      community.general.pacman:
        state: present
        package:
          - firefox
          - gnu-free-fonts
          - noto-fonts
          - ttf-bitstream-vera
          - ttf-croscore
          - ttf-dejavu
          - ttf-droid
          - ttf-ibm-plex
          - ttf-liberation
          - ttf-mona-sans

    - name: Ensure the Firefox Policies Path Exists
      ansible.builtin.file:
        state: directory
        path: /etc/firefox/policies
        owner: root
        group: root
        mode: "0755"

    - name: Copy Firefox Policies
      ansible.builtin.copy:
        src: files/policies.json
        dest: /etc/firefox/policies/policies.json
        owner: root
        group: root
        mode: "0644"

- name: Install Chrome
  become: false
  kewlfft.aur.aur:
    state: present
    use: paru
    name: google-chrome

- name: Install Man Pages
  community.general.pacman:
    state: present
    name:
      - man-db
      - less
      - man-pages

- name: Install Bitwarden
  tags: bitwarden
  community.general.pacman:
    state: present
    name: bitwarden

- name: Install System Utilites
  tags: utilities
  community.general.pacman:
    state: present
    name:
      - gnome-disk-utility
      - bind
      - minicom
      - bpytop
      - rsync
      - wireshark-qt

- name: Install Printer and Scanner Support
  community.general.pacman:
    state: present
    name:
      - cups
      - cups-pdf
      - hplip
      - sane
      - simple-scan

- name: Install libreoffice
  tags: libreoffice
  community.general.pacman:
    state: present
    name:
      - ttf-caladea
      - ttf-carlito
      - ttf-dejavu
      - ttf-liberation
      - ttf-linux-libertine-g
      - adobe-source-code-pro-fonts
      - adobe-source-sans-fonts
      - adobe-source-serif-fonts
      - hunspell
      - hunspell-en_us
      - libreoffice-still

- name: Install Work Applications
  tags: work_apps
  block:
    - name: Install IBM iAccess Client
      become: false
      kewlfft.aur.aur:
        state: present
        use: paru
        name: iacs

    - name: Install Onedrive Client
      tags: onedrive
      become: false
      kewlfft.aur.aur:
        state: present
        use: paru
        name: onedrive-abraunegg

    - name: Install DBeaver
      community.general.pacman:
        state: present
        name: dbeaver

    - name: Install PHPStorm
      tags: phpstorm
      block:
        - name: Install PHPStorm Aur Package
          become: false
          kewlfft.aur.aur:
            state: present
            name: phpstorm
            use: paru

        - name: Stow ideavim Config
          ansible.builtin.command:
            cmd: stow ideavim
            chdir: "{{ dotfiles_path }}"
            creates: "{{ config_path }}/ideavim"

    - name: Install Remmina
      community.general.pacman:
        state: present
        name:
          - freerdp
          - libvncserver
          - remmina
          - spice-gtk

    - name: Install Todoist
      become: false
      kewlfft.aur.aur:
        state: present
        name: todoist-appimage-integration
        use: paru

- name: Install Personal Apps
  tags: personal_apps
  when: system_type == "personal"
  block:
    - name: Install Thunderbird
      community.general.pacman:
        state: present
        name: thunderbird

    - name: Install Private Internet Access Client
      kewlfft.aur.aur:
        state: present
        use: paru
        name: piavpn-bin

    - name: Install Steam
      community.general.pacman:
        state: present
        name: steam
# vim: ft=yaml.ansible
